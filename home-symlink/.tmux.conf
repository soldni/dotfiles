# Dynamic hostname-based color theme: primary = random per-host, secondary = black

# Reload config with Prefix (Ctrl+b) then Ctrl+r
bind-key r source-file ~/.tmux.conf \; display-message "tmux config reloaded"

run-shell '
  # ANSI color indices to choose from (avoid hard-to-see ones)
  colors="1 2 3 4 5 6 9 10 11 12 13 14"

  set -- $colors

  # Hash hostname to an integer
  sum=$(hostname | cksum | cut -d" " -f1)

  # Map hash into [1..$#] and pick that color index
  i=$((sum % $# + 1))
  eval "idx=\${$i}"

  primary="colour${idx}"
  secondary="black"

  ##### Status bar #####

  # Overall status bar style
  tmux set-option -g status-style "bg=$primary,fg=$secondary"

  # Left side: prefix indicator dot
  # Inactive: black; Prefix-on: primary
  tmux set-option -g status-left "#[bg=default,fg=$secondary]#{?client_prefix,#[fg=$primary],#[fg=$secondary]} ‚è∫ "

  # Right side: date/time (primary on black)
  tmux set-option -g status-right "#[bg=$secondary,fg=default] #(date \"+%a %m/%d %H:%M\")"

  ##### Windows / tabs #####

  # Inactive windows: black, Active window: primary
  tmux set-window-option -g window-status-style "fg=$secondary,bg=default"
  tmux set-window-option -g window-status-current-style "fg=$primary,bg=default"

  ##### Panes #####

  # Pane borders: inactive black, active primary
  tmux set-option -g pane-border-style "fg=$secondary"
  tmux set-option -g pane-active-border-style "fg=$primary"

  ##### Copy-mode / messages #####

  # Selection / copy-mode
  tmux set-option -g mode-style "bg=$primary,fg=$secondary"

  # Command / message bar
  tmux set-option -g message-style "bg=$primary,fg=$secondary"
'
